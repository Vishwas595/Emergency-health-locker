<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>User Dashboard | QURE</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- âŒ REMOVED GRADIO (Not needed with direct API approach) -->
  
  <link rel="stylesheet" href="css/style.css" />
</head>

<body>
  <div class="container">
    <h1>ğŸ‘¤ USER DASHBOARD</h1>
    <button onclick="logout()">ğŸšª Logout</button>

    <hr />

    <!-- ================= MEDICAL PROFILE ================= -->
    <h2>âœï¸ Medical Profile</h2>

    <input id="name" placeholder="Full Name" />
    <input id="dob" type="date" />

    <select id="gender">
      <option>Male</option>
      <option>Female</option>
      <option>Other</option>
    </select>

    <input id="blood" placeholder="Blood Group" />
    <input id="emergency_contact" placeholder="Emergency Contact Number" />

    <textarea id="medications" placeholder="Current Medications"></textarea>
    <textarea id="drug_allergies" placeholder="Drug Allergies"></textarea>
    <textarea id="other_allergies" placeholder="Other Allergies"></textarea>
    <textarea id="surgeries" placeholder="Recent Surgeries"></textarea>

    <input id="emergency_status" placeholder="Emergency Alert / Condition" />
    <input id="vitals" placeholder="Last Recorded Vital Signs" />
    <input id="devices" placeholder="Medical Devices (if any)" />

    <button onclick="saveProfile()">ğŸ’¾ Save Profile</button>
    <p id="profileMsg"></p>

    <hr />

    <!-- ================= RECORD UPLOAD ================= -->
    <h2>ğŸ“¤ Upload Medical Record</h2>

    <select id="recordType">
      <option>Lab Report</option>
      <option>Prescription</option>
      <option>Medical Report</option>
      <option>Scan</option>
      <option>Other</option>
    </select>

    <input id="recordTitle" placeholder="Record Title" />
    <input id="recordFile" type="file" />

    <button onclick="uploadRecord()">â¬†ï¸ Upload Record</button>
    <p id="uploadMsg"></p>

    <hr />

    <!-- ================= RECORD LIST ================= -->
    <h2>ğŸ“‚ Uploaded Medical Records</h2>
    <div id="records"></div>

    <hr />

    <!-- ================= EMERGENCY ACCESS ================= -->
    <h2>ğŸš‘ Emergency Access</h2>

    <p><strong>Public Emergency Page Link</strong></p>
    <input id="emergencyLink" readonly />
    <button onclick="copyEmergencyLink()">ğŸ“‹ Copy Emergency Link</button>

    <br /><br />

    <h3>Emergency QR Code</h3>
    <img id="qrImage" width="220" alt="Emergency QR Code" />
    <p id="qrMsg" style="color:red"></p>

    <br />

    <button onclick="downloadPDF()">ğŸ“„ Download Medical PDF</button>
  </div>

   <!-- ğŸ©º CHATBOT MASCOT -->
  <div id="chatbot-toggle" title="Medical Assistant">
    <img src="icons/medical-mascot.png" alt="Nexa Medical Assistant" />
    <div id="mascot-bubble">ğŸ‘‹ Hi, I am Nexa</div>
  </div>

  <!-- ================= CHATBOT WINDOW ================= -->
  <div id="chatbot-container" class="chatbot-hidden">
    <div id="chatbot-header">
      <span>ğŸ©º Medical Assistant</span>
      <button id="chatbot-close">âœ•</button>
    </div>

    <div id="chatbot-messages">
      <div class="chatbot-bot">
        <span>Hello! Ask me about your blood group, allergies, medications, or reports.</span>
      </div>
    </div>

    <div id="chatbot-input-area">
      <input
        id="chatbot-input"
        placeholder="Ask about your medical data..."
      />
      <button id="chatbot-send">Send</button>
    </div>
  </div>

  <!-- ================= SCRIPTS ================= -->
  <script src="js/user.js"></script>
  <script src="js/chatbot.js"></script>
</body>
</html>